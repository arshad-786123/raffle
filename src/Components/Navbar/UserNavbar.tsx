import { useEffect, useRef, useState } from "react";
import mainLogo from "../../assets/second_logo.png";
import whitelogo from "../../assets/main_logo.png";
import { useNavigate } from "react-router-dom";
import { UserRegister } from "../../Utils/Interface/register.interface";
import {
  AuthResult,
  RegisterResponse,
} from "../../Services/Authentication/login";
import { useSelector, useDispatch } from "react-redux";
import { increment } from "../../Redux/Counter/counterSlice";
import { checkType } from "../../Services/Authentication/checkType";
import Cookies from "js-cookie";
import { storeGuestUser, storeUser } from "../../Redux/User/userSlice";
import { fetchAccessToken } from "../../Services/Middleware/fetchAccessToken";
import { Dropdown } from "flowbite-react";
import { CONSTANT_DATA } from "../../constants";
import { Toaster } from "react-hot-toast";
import { clearCart } from "../../Redux/Cart/cartSlice";
import noimage from "../../assets/no-image-user.png";
import entries from "../../assets/admin_menu/entries.png";
import balance from "../../assets/owner_menu/balance.png";

interface AuthenticationModalState {
  isSignUpOpen: boolean;
  isSignInOpen: boolean;
  isSignUp1Step: boolean;
  isBusinessSignUp1Step: boolean;
  isSignUp2Step: boolean;
  isForgotPassOpen: boolean;
}

interface UserNavbarProps {
  selectedImageForNavbar: string | null;
  setAuthenticationModal: React.Dispatch<
    React.SetStateAction<AuthenticationModalState>
  >;
  authenticationModal: AuthenticationModalState;
}
const UserNavbar: React.FC<UserNavbarProps> = ({
  selectedImageForNavbar,
  setAuthenticationModal,
  authenticationModal,
}) => {
  // console.log("selectedImageForNavbar", selectedImageForNavbar);

  const userDetails = useSelector((state: any) => state.reducer.user);
  const [customerData, setCustomerData] = useState<any>(null);
  const [profileImage, setProfileImage] = useState<string | null>(null);
  const [notifications, setNotifications] = useState([]);
  // state.reducer.user
  const dispatch = useDispatch();

  const navigate = useNavigate();

  const handleLogoClick = (
    e: React.MouseEvent<HTMLImageElement, MouseEvent>
  ) => {
    e.preventDefault();
    navigate("/");
  };

  const [isDrawerOpen, setIsDrawerOpen] = useState(false);

  const toggleDrawer = () => {
    setIsDrawerOpen(!isDrawerOpen);
  };

  const drawerRef = useRef<HTMLDivElement>(null); // Specify the type of drawerRef

  useEffect(() => {
    const handleOutsideClick = (event: MouseEvent) => {
      // Check if drawerRef.current is not null and contains the event target
      if (
        drawerRef.current &&
        !drawerRef.current.contains(event.target as Node)
      ) {
        setIsDrawerOpen(false);
      }
    };

    document.addEventListener("mousedown", handleOutsideClick);

    return () => {
      document.removeEventListener("mousedown", handleOutsideClick);
    };
  }, []);

  const viewAllNotification = () => {
    navigate("/notification", { state: notifications });
  };
  const redirection = () => {
    navigate("/users");
  };

  const [isExpanded, setIsExpanded] = useState(false);

  const toggleCollapse = () => {
    setIsExpanded(!isExpanded);
  };

  const [selectedMenu, setselectedMenu] = useState(
    <div className=" bg-[#20124C] cursor-pointer text-white flex items-center gap-2 font-medium">
      <svg
        width="16"
        height="15"
        viewBox="0 0 16 15"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M6.62844 7.87252H1.71282C1.68607 7.87252 1.66593 7.86242 1.65343 7.85042C1.64736 7.8446 1.64478 7.83989 1.64397 7.83804C1.64352 7.83704 1.64353 7.83691 1.64355 7.8367C1.64355 7.83666 1.64355 7.83661 1.64355 7.83656V1.5489C1.64355 1.54884 1.64355 1.54879 1.64355 1.54875C1.64353 1.54855 1.64352 1.54842 1.64397 1.54741C1.64478 1.54556 1.64736 1.54086 1.65343 1.53503C1.66593 1.52304 1.68607 1.51294 1.71282 1.51294H6.62844C6.6552 1.51294 6.67533 1.52304 6.68784 1.53503C6.69391 1.54086 6.69648 1.54556 6.6973 1.54741C6.69775 1.54842 6.69774 1.54855 6.69772 1.54875C6.69772 1.54879 6.69771 1.54884 6.69771 1.5489V7.83656C6.69771 7.83672 6.69774 7.83679 6.69771 7.83695C6.69768 7.83712 6.69758 7.83741 6.6973 7.83804C6.69648 7.83989 6.69391 7.8446 6.68784 7.85042C6.67533 7.86242 6.6552 7.87252 6.62844 7.87252ZM6.62844 14.1602H1.71282C1.68607 14.1602 1.66593 14.1501 1.65343 14.1381C1.64736 14.1323 1.64478 14.1276 1.64397 14.1257C1.64352 14.1247 1.64353 14.1246 1.64355 14.1244C1.64355 14.1243 1.64355 14.1243 1.64355 14.1242V10.9804C1.64355 10.9803 1.64355 10.9803 1.64355 10.9802C1.64353 10.98 1.64352 10.9799 1.64397 10.9789C1.64478 10.9771 1.64736 10.9723 1.65343 10.9665C1.66593 10.9545 1.68607 10.9444 1.71282 10.9444H6.62844C6.6552 10.9444 6.67533 10.9545 6.68784 10.9665C6.69391 10.9723 6.69648 10.9771 6.6973 10.9789C6.69784 10.9801 6.69771 10.9801 6.69771 10.9804V14.1242C6.69771 14.1245 6.69784 14.1245 6.6973 14.1257C6.69648 14.1276 6.69391 14.1323 6.68784 14.1381C6.67533 14.1501 6.6552 14.1602 6.62844 14.1602ZM14.8211 14.1602H9.90552C9.87877 14.1602 9.85863 14.1501 9.84613 14.1381C9.84005 14.1323 9.83748 14.1276 9.83666 14.1257C9.83622 14.1247 9.83623 14.1246 9.83624 14.1244C9.83625 14.1243 9.83625 14.1243 9.83625 14.1242V7.83656C9.83625 7.8365 9.83625 7.83646 9.83624 7.83641C9.83623 7.83621 9.83622 7.83608 9.83666 7.83507C9.83748 7.83322 9.84005 7.82852 9.84613 7.82269C9.85863 7.8107 9.87877 7.8006 9.90552 7.8006H14.8211C14.8479 7.8006 14.868 7.8107 14.8805 7.82269C14.8866 7.82852 14.8892 7.83322 14.89 7.83507C14.8904 7.83608 14.8904 7.83621 14.8904 7.83641C14.8904 7.83646 14.8904 7.8365 14.8904 7.83656V14.1242C14.8904 14.1243 14.8904 14.1243 14.8904 14.1244C14.8904 14.1246 14.8904 14.1247 14.89 14.1257C14.8892 14.1276 14.8866 14.1323 14.8805 14.1381C14.868 14.1501 14.8479 14.1602 14.8211 14.1602ZM9.83625 4.69273V1.5489C9.83625 1.54856 9.83613 1.54863 9.83666 1.54741C9.83748 1.54556 9.84005 1.54086 9.84613 1.53503C9.85863 1.52304 9.87877 1.51294 9.90552 1.51294H14.8211C14.8479 1.51294 14.868 1.52304 14.8805 1.53503C14.8866 1.54086 14.8892 1.54556 14.89 1.54741C14.8905 1.54863 14.8904 1.54856 14.8904 1.5489V4.69273C14.8904 4.69306 14.8905 4.693 14.89 4.69421C14.8892 4.69606 14.8866 4.70077 14.8805 4.70659C14.868 4.71859 14.8479 4.72868 14.8211 4.72868H9.90552C9.87877 4.72868 9.85863 4.71859 9.84613 4.70659C9.84005 4.70077 9.83748 4.69606 9.83666 4.69421C9.83622 4.69321 9.83623 4.69308 9.83624 4.69287C9.83625 4.69283 9.83625 4.69278 9.83625 4.69273Z"
          fill="white"
          stroke="white"
          stroke-width="1.5"
        />
      </svg>
      <p>My Raffles</p>
    </div>
  );

  const handleSelectMenu = (menu: Number) => {
    switch (menu) {
      case 1:
        setselectedMenu(
          <div className="text-white flex items-center gap-2 font-medium">
            <svg
              width="16"
              height="15"
              viewBox="0 0 16 15"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M6.62844 7.87252H1.71282C1.68607 7.87252 1.66593 7.86242 1.65343 7.85042C1.64736 7.8446 1.64478 7.83989 1.64397 7.83804C1.64352 7.83704 1.64353 7.83691 1.64355 7.8367C1.64355 7.83666 1.64355 7.83661 1.64355 7.83656V1.5489C1.64355 1.54884 1.64355 1.54879 1.64355 1.54875C1.64353 1.54855 1.64352 1.54842 1.64397 1.54741C1.64478 1.54556 1.64736 1.54086 1.65343 1.53503C1.66593 1.52304 1.68607 1.51294 1.71282 1.51294H6.62844C6.6552 1.51294 6.67533 1.52304 6.68784 1.53503C6.69391 1.54086 6.69648 1.54556 6.6973 1.54741C6.69775 1.54842 6.69774 1.54855 6.69772 1.54875C6.69772 1.54879 6.69771 1.54884 6.69771 1.5489V7.83656C6.69771 7.83672 6.69774 7.83679 6.69771 7.83695C6.69768 7.83712 6.69758 7.83741 6.6973 7.83804C6.69648 7.83989 6.69391 7.8446 6.68784 7.85042C6.67533 7.86242 6.6552 7.87252 6.62844 7.87252ZM6.62844 14.1602H1.71282C1.68607 14.1602 1.66593 14.1501 1.65343 14.1381C1.64736 14.1323 1.64478 14.1276 1.64397 14.1257C1.64352 14.1247 1.64353 14.1246 1.64355 14.1244C1.64355 14.1243 1.64355 14.1243 1.64355 14.1242V10.9804C1.64355 10.9803 1.64355 10.9803 1.64355 10.9802C1.64353 10.98 1.64352 10.9799 1.64397 10.9789C1.64478 10.9771 1.64736 10.9723 1.65343 10.9665C1.66593 10.9545 1.68607 10.9444 1.71282 10.9444H6.62844C6.6552 10.9444 6.67533 10.9545 6.68784 10.9665C6.69391 10.9723 6.69648 10.9771 6.6973 10.9789C6.69784 10.9801 6.69771 10.9801 6.69771 10.9804V14.1242C6.69771 14.1245 6.69784 14.1245 6.6973 14.1257C6.69648 14.1276 6.69391 14.1323 6.68784 14.1381C6.67533 14.1501 6.6552 14.1602 6.62844 14.1602ZM14.8211 14.1602H9.90552C9.87877 14.1602 9.85863 14.1501 9.84613 14.1381C9.84005 14.1323 9.83748 14.1276 9.83666 14.1257C9.83622 14.1247 9.83623 14.1246 9.83624 14.1244C9.83625 14.1243 9.83625 14.1243 9.83625 14.1242V7.83656C9.83625 7.8365 9.83625 7.83646 9.83624 7.83641C9.83623 7.83621 9.83622 7.83608 9.83666 7.83507C9.83748 7.83322 9.84005 7.82852 9.84613 7.82269C9.85863 7.8107 9.87877 7.8006 9.90552 7.8006H14.8211C14.8479 7.8006 14.868 7.8107 14.8805 7.82269C14.8866 7.82852 14.8892 7.83322 14.89 7.83507C14.8904 7.83608 14.8904 7.83621 14.8904 7.83641C14.8904 7.83646 14.8904 7.8365 14.8904 7.83656V14.1242C14.8904 14.1243 14.8904 14.1243 14.8904 14.1244C14.8904 14.1246 14.8904 14.1247 14.89 14.1257C14.8892 14.1276 14.8866 14.1323 14.8805 14.1381C14.868 14.1501 14.8479 14.1602 14.8211 14.1602ZM9.83625 4.69273V1.5489C9.83625 1.54856 9.83613 1.54863 9.83666 1.54741C9.83748 1.54556 9.84005 1.54086 9.84613 1.53503C9.85863 1.52304 9.87877 1.51294 9.90552 1.51294H14.8211C14.8479 1.51294 14.868 1.52304 14.8805 1.53503C14.8866 1.54086 14.8892 1.54556 14.89 1.54741C14.8905 1.54863 14.8904 1.54856 14.8904 1.5489V4.69273C14.8904 4.69306 14.8905 4.693 14.89 4.69421C14.8892 4.69606 14.8866 4.70077 14.8805 4.70659C14.868 4.71859 14.8479 4.72868 14.8211 4.72868H9.90552C9.87877 4.72868 9.85863 4.71859 9.84613 4.70659C9.84005 4.70077 9.83748 4.69606 9.83666 4.69421C9.83622 4.69321 9.83623 4.69308 9.83624 4.69287C9.83625 4.69283 9.83625 4.69278 9.83625 4.69273Z"
                fill="white"
                stroke="white"
                stroke-width="1.5"
              />
            </svg>
            <p>My Raffles</p>
          </div>
        );
        navigate("/user");
        break;
      case 2:
        setselectedMenu(
          <div className="  cursor-pointer text-white flex items-center gap-2 font-medium">
            <svg
              width="15"
              height="16"
              viewBox="0 0 15 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_206_3063)">
                <path
                  d="M7.79391 7.34468C8.7204 7.34468 9.52266 6.98866 10.1782 6.28622C10.8337 5.5839 11.166 4.72457 11.166 3.7318C11.166 2.73937 10.8337 1.87992 10.1781 1.17737C9.52245 0.475165 8.72029 0.119141 7.79391 0.119141C6.86732 0.119141 6.06528 0.475165 5.40977 1.17749C4.75427 1.87981 4.42188 2.73926 4.42188 3.7318C4.42188 4.72457 4.75427 5.58402 5.40988 6.28634C6.06549 6.98854 6.86765 7.34468 7.79391 7.34468Z"
                  fill="white"
                />
                <path
                  d="M13.694 11.6534C13.675 11.3611 13.6368 11.0423 13.5805 10.7056C13.5237 10.3664 13.4505 10.0457 13.3629 9.75266C13.2725 9.44974 13.1494 9.15059 12.9973 8.86392C12.8395 8.56637 12.654 8.30728 12.446 8.09408C12.2284 7.87103 11.962 7.6917 11.654 7.5609C11.347 7.43078 11.0068 7.36486 10.6429 7.36486C10.5 7.36486 10.3618 7.42769 10.0948 7.61388C9.93056 7.72867 9.7384 7.86142 9.52393 8.00824C9.34053 8.13344 9.09209 8.25074 8.78522 8.35694C8.48582 8.46074 8.18184 8.51339 7.88181 8.51339C7.58177 8.51339 7.27789 8.46074 6.97818 8.35694C6.67163 8.25086 6.42319 8.13356 6.24001 8.00836C6.02756 7.86291 5.8353 7.73015 5.66856 7.61377C5.40196 7.42757 5.26364 7.36475 5.12073 7.36475C4.75671 7.36475 4.41663 7.43078 4.10976 7.56101C3.80193 7.69159 3.53543 7.87092 3.31764 8.09419C3.10968 8.30751 2.92415 8.56649 2.76649 8.86392C2.6145 9.15059 2.49146 9.44962 2.40088 9.75278C2.3134 10.0459 2.24023 10.3664 2.18341 10.7056C2.12712 11.0418 2.08888 11.3608 2.06998 11.6537C2.05139 11.9408 2.04199 12.2387 2.04199 12.5395C2.04199 13.3225 2.27431 13.9564 2.73242 14.4239C3.18488 14.8852 3.78355 15.1192 4.51158 15.1192H11.2527C11.9807 15.1192 12.5792 14.8853 13.0317 14.4239C13.4899 13.9567 13.7223 13.3227 13.7223 12.5394C13.7222 12.2372 13.7126 11.939 13.694 11.6534Z"
                  fill="white"
                />
              </g>
              <defs>
                <clipPath id="clip0_206_3063">
                  <rect
                    width="14"
                    height="15"
                    fill="white"
                    transform="translate(0.893555 0.119141)"
                  />
                </clipPath>
              </defs>
            </svg>
            <p>My Account</p>
          </div>
        );
        navigate("/user/account");
        break;
      case 3:
        setselectedMenu(
          <div className=" cursor-pointer text-white flex items-center gap-2 font-medium">
            <svg
              width="17"
              height="15"
              viewBox="0 0 17 15"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M15.5281 0.75H13.1281V0H3.52813V0.75H1.12813C0.648125 0.75 0.328125 1.05 0.328125 1.5V3.3C0.328125 5.025 1.68813 6.45 3.52813 6.675V6.75C3.52813 8.925 5.12813 10.725 7.28813 11.175L6.72813 12.75H4.88812C4.56812 12.75 4.24812 12.975 4.16812 13.275L3.52813 15H13.1281L12.4881 13.275C12.4081 12.975 12.0881 12.75 11.7681 12.75H9.92813L9.36812 11.175C11.5281 10.725 13.1281 8.925 13.1281 6.75V6.675C14.9681 6.45 16.3281 5.025 16.3281 3.3V1.5C16.3281 1.05 16.0081 0.75 15.5281 0.75ZM3.52813 5.175C2.64813 4.95 1.92813 4.2 1.92813 3.3V2.25H3.52813V5.175ZM9.92813 7.5L8.32812 6.675L6.72813 7.5L7.12813 6L5.92812 4.5H7.60813L8.32812 3L9.04813 4.5H10.7281L9.52812 6L9.92813 7.5ZM14.7281 3.3C14.7281 4.2 14.0081 5.025 13.1281 5.175V2.25H14.7281V3.3Z"
                fill="white"
              />
            </svg>
            <p>My Prizes</p>
          </div>
        );
        navigate("/user/prizes");
        break;
      case 5:
        setselectedMenu(
          <div className=" cursor-pointer text-white flex items-center gap-2 font-medium">
            <svg
              width="17"
              height="15"
              viewBox="0 0 17 15"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M15.5281 0.75H13.1281V0H3.52813V0.75H1.12813C0.648125 0.75 0.328125 1.05 0.328125 1.5V3.3C0.328125 5.025 1.68813 6.45 3.52813 6.675V6.75C3.52813 8.925 5.12813 10.725 7.28813 11.175L6.72813 12.75H4.88812C4.56812 12.75 4.24812 12.975 4.16812 13.275L3.52813 15H13.1281L12.4881 13.275C12.4081 12.975 12.0881 12.75 11.7681 12.75H9.92813L9.36812 11.175C11.5281 10.725 13.1281 8.925 13.1281 6.75V6.675C14.9681 6.45 16.3281 5.025 16.3281 3.3V1.5C16.3281 1.05 16.0081 0.75 15.5281 0.75ZM3.52813 5.175C2.64813 4.95 1.92813 4.2 1.92813 3.3V2.25H3.52813V5.175ZM9.92813 7.5L8.32812 6.675L6.72813 7.5L7.12813 6L5.92812 4.5H7.60813L8.32812 3L9.04813 4.5H10.7281L9.52812 6L9.92813 7.5ZM14.7281 3.3C14.7281 4.2 14.0081 5.025 13.1281 5.175V2.25H14.7281V3.3Z"
                fill="white"
              />
            </svg>
            <p>Balance</p>
          </div>
        );
        navigate("/user/balance");
        break;
      case 6:
        setselectedMenu(
          <div className=" cursor-pointer text-white flex items-center gap-2 font-medium">
            <img src={balance} alt="balance" />
            {/* <svg
              width="17"
              height="15"
              viewBox="0 0 17 15"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M15.5281 0.75H13.1281V0H3.52813V0.75H1.12813C0.648125 0.75 0.328125 1.05 0.328125 1.5V3.3C0.328125 5.025 1.68813 6.45 3.52813 6.675V6.75C3.52813 8.925 5.12813 10.725 7.28813 11.175L6.72813 12.75H4.88812C4.56812 12.75 4.24812 12.975 4.16812 13.275L3.52813 15H13.1281L12.4881 13.275C12.4081 12.975 12.0881 12.75 11.7681 12.75H9.92813L9.36812 11.175C11.5281 10.725 13.1281 8.925 13.1281 6.75V6.675C14.9681 6.45 16.3281 5.025 16.3281 3.3V1.5C16.3281 1.05 16.0081 0.75 15.5281 0.75ZM3.52813 5.175C2.64813 4.95 1.92813 4.2 1.92813 3.3V2.25H3.52813V5.175ZM9.92813 7.5L8.32812 6.675L6.72813 7.5L7.12813 6L5.92812 4.5H7.60813L8.32812 3L9.04813 4.5H10.7281L9.52812 6L9.92813 7.5ZM14.7281 3.3C14.7281 4.2 14.0081 5.025 13.1281 5.175V2.25H14.7281V3.3Z"
                fill="white"
              />
            </svg> */}
            <p>Orders</p>
          </div>
        );
        navigate("/user/orders");
        break;
      case 7:
        setselectedMenu(
          <div className=" cursor-pointer text-white flex items-center gap-2 font-medium">
            <svg
              width="15"
              height="16"
              viewBox="0 0 15 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_206_3068)">
                <path
                  d="M14.3281 10.9395C14.3281 8.75306 12.9531 6.84281 11.0142 6.26717C10.8923 3.22385 8.54375 0.788086 5.67383 0.788086C2.72615 0.788086 0.328125 3.3574 0.328125 6.51562C0.328125 7.54491 0.583832 8.54707 1.0694 9.42689L0.347778 12.222L2.95665 11.4489C3.71149 11.9272 4.56299 12.1966 5.44183 12.2372C5.97899 14.3148 7.76199 15.7881 9.80273 15.7881C10.6173 15.7881 11.4094 15.5557 12.1054 15.114L14.3084 15.7669L13.699 13.4066C14.1112 12.6609 14.3281 11.8122 14.3281 10.9395ZM3.08611 10.4986L1.52431 10.9615L1.95636 9.28819L1.85788 9.12316C1.39378 8.34519 1.14844 7.44351 1.14844 6.51562C1.14844 3.84206 3.1785 1.66699 5.67383 1.66699C8.16916 1.66699 10.1992 3.84206 10.1992 6.51562C10.1992 9.18919 8.16916 11.3643 5.67383 11.3643C4.8078 11.3643 3.96634 11.1014 3.24013 10.6041L3.08611 10.4986ZM13.1319 14.5065L11.973 14.1629L11.8183 14.2708C11.2183 14.6884 10.5213 14.9092 9.80273 14.9092C8.19885 14.9092 6.78947 13.7981 6.29013 12.2048C8.74615 11.9014 10.7006 9.8074 10.9839 7.17583C12.4708 7.71096 13.5078 9.22101 13.5078 10.9395C13.5078 11.7093 13.3018 12.4561 12.912 13.099L12.8113 13.2648L13.1319 14.5065Z"
                  fill="white"
                />
                <path
                  d="M5.26367 8.72754H6.08398V9.60645H5.26367V8.72754Z"
                  fill="white"
                />
                <path
                  d="M6.49414 5.18262C6.49414 5.43221 6.39929 5.66258 6.22711 5.83138L5.26367 6.77621V7.84863H6.08398V7.16325L6.78093 6.4798C7.11995 6.14735 7.31445 5.6746 7.31445 5.18262C7.31445 4.2133 6.57852 3.4248 5.67383 3.4248C4.76913 3.4248 4.0332 4.2133 4.0332 5.18262H4.85352C4.85352 4.69796 5.22148 4.30371 5.67383 4.30371C6.12617 4.30371 6.49414 4.69796 6.49414 5.18262Z"
                  fill="white"
                />
              </g>
              <defs>
                <clipPath id="clip0_206_3068">
                  <rect
                    width="14"
                    height="15"
                    fill="white"
                    transform="translate(0.328125 0.788086)"
                  />
                </clipPath>
              </defs>
            </svg>
            <p>Support</p>
          </div>
        );
        navigate("/user/support");
        break;
      default:
        break;
    }
    setIsExpanded(false);
  };

  const [userData, setUserData] = useState<AuthResult>();

  useEffect(() => {
    setUserData(userDetails);
    getUserType();
  }, []);

  const getUserType = async () => {
    const { type } = await checkType();
    if (type !== "Customer") {
      navigate("/");
    }
  };

  useEffect(() => {
    // Get the initial value from localStorage
    const persistedData = localStorage.getItem("persist:root");
    if (persistedData) {
      const parsedData = JSON.parse(persistedData);
      const user = JSON.parse(parsedData.user);
      setCustomerData(user);
      setProfileImage(user?.user?.image);
    }

    // Listen for storage changes
    const handleStorageChange = () => {
      const updatedPersistedData = localStorage.getItem("persist:root");
      if (updatedPersistedData) {
        const updatedParsedData = JSON.parse(updatedPersistedData);
        const updatedUser = JSON.parse(updatedParsedData.user);
        setCustomerData(updatedUser);
        setProfileImage(updatedUser?.user?.image);
      }
    };

    window.addEventListener("storage", handleStorageChange);

    return () => {
      window.removeEventListener("storage", handleStorageChange);
    };
  }, []);

  const handleLogout = () => {
    Cookies.remove("accessToken");
    Cookies.remove("refreshToken");
    localStorage.removeItem("selectedImage");
    localStorage.removeItem("userdetails");
    localStorage.removeItem("persist:root");

    dispatch(storeUser(""));
    dispatch(storeGuestUser(""));
    dispatch(clearCart());
    navigate("/");
  };
  const renderProfileImage = () => {
    const imageSrc = profileImage
      ? profileImage.startsWith("blob")
        ? profileImage
        : `${CONSTANT_DATA.IMAGE_BASE_URL}${profileImage}`
      : localStorage.getItem("selectedImage") || null;

    return imageSrc ? (
      <img
        src={imageSrc}
        alt="User"
        className="w-12 h-12 rounded-full"
        onError={(e) => {
          const target = e.target as HTMLImageElement;
          target.onerror = null;
          target.src = noimage;
        }}
      />
    ) : (
      <svg
        width="46"
        height="44"
        viewBox="0 0 46 44"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <ellipse
          cx="23.1136"
          cy="21.5474"
          rx="22.3402"
          ry="21.5"
          fill="#F2DAE9"
        />
        <g clipPath="url(#clip0_160_72)">
          <path
            d="M22.9635 21.3854C23.9561 21.3854 24.8157 21.0532 25.518 20.3975C26.2204 19.742 26.5764 18.94 26.5764 18.0134C26.5764 17.0871 26.2204 16.285 25.5179 15.6293C24.8155 14.9739 23.956 14.6416 22.9635 14.6416C21.9707 14.6416 21.1114 14.9739 20.4091 15.6294C19.7067 16.2849 19.3506 17.087 19.3506 18.0134C19.3506 18.94 19.7067 19.7422 20.4092 20.3977C21.1116 21.0532 21.9709 21.3854 22.9635 21.3854Z"
            fill="#C2C2C2"
          />
          <path
            d="M30.0395 25.4271C30.0088 25.0676 29.9433 24.6571 29.8439 24.2096C29.7428 23.7574 29.6058 23.3406 29.4369 22.9653C29.2617 22.5665 29.0033 22.173 28.6784 21.8157C28.3418 21.4487 27.944 21.1462 27.498 20.9166C27.0536 20.6878 26.568 20.5737 26.0466 20.5737C25.8048 20.5737 25.5723 20.661 25.1983 20.8862C24.9727 21.0183 24.707 21.1766 24.4114 21.3546C24.1867 21.4893 23.878 21.616 23.4775 21.7223C23.0927 21.8223 22.7036 21.8696 22.3144 21.8696C21.9252 21.8696 21.5365 21.8223 21.1517 21.7223C20.7514 21.6161 20.4428 21.4895 20.2182 21.3547C19.8428 21.1288 19.6097 21.0404 19.3678 21.0404C18.8468 21.0404 18.3614 21.1545 17.9173 21.3833C17.4715 21.6129 17.0717 21.9157 16.7325 22.2834C16.408 22.6407 16.1497 23.0342 15.9745 23.4328C15.8055 23.8081 15.6685 24.2248 15.5674 24.677C15.468 25.1245 15.4024 25.535 15.3717 25.8945C15.3426 26.2226 15.3287 26.5652 15.3287 26.9118C15.3287 27.8877 15.623 28.659 16.1828 29.169C16.7354 29.6717 17.4987 29.919 18.4282 29.919H27.2007C28.1303 29.919 28.8932 29.672 29.4458 29.169C30.006 28.6585 30.3007 27.887 30.3007 26.9118C30.3007 26.5609 30.2861 26.222 30.2566 25.9052L30.0395 25.4271Z"
            fill="#C2C2C2"
          />
        </g>
        <defs>
          <clipPath id="clip0_160_72">
            <rect
              width="16.004"
              height="14.9385"
              fill="white"
              transform="translate(15.9448 14.6416)"
            />
          </clipPath>
        </defs>
      </svg>
    );
  };

  return (
    <div className="sticky top-0 w-full z-50" >
      <Toaster position="top-right" />
      <div className="bg-[white] w-full hidden xl:block shadow-lg shadow-white-900" style={{ fontFamily: "poppins, sans-serif" }}>
        <div className=" w-[94%] m-auto flex items-center justify-between h-20">
          <div className="flex items-center gap-32">
            <img
              className="w-36"
              src={mainLogo}
              alt="raffly"
              onClick={handleLogoClick}
              style={{ cursor: "pointer" }}
            />
            {/* </a> */}
          </div>
          <div className="flex items-center gap-6">
            {/* <Dropdown inline label="" dismissOnClick={true} renderTrigger={() =>
                            <svg width="21" height="25" viewBox="0 0 21 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10.7584 24.8595C9.73404 24.8595 8.75162 24.4526 8.02727 23.7282C7.30293 23.0039 6.896 22.0215 6.896 20.9971C6.896 20.7922 6.97738 20.5957 7.12225 20.4509C7.26712 20.306 7.4636 20.2246 7.66848 20.2246C7.87336 20.2246 8.06984 20.306 8.21471 20.4509C8.35958 20.5957 8.44096 20.7922 8.44096 20.9971C8.44096 21.6117 8.68512 22.2012 9.11973 22.6358C9.55434 23.0704 10.1438 23.3145 10.7584 23.3145C11.373 23.3145 11.9625 23.0704 12.3971 22.6358C12.8317 22.2012 13.0759 21.6117 13.0759 20.9971C13.0759 20.7922 13.1573 20.5957 13.3021 20.4509C13.447 20.306 13.6435 20.2246 13.8484 20.2246C14.0532 20.2246 14.2497 20.306 14.3946 20.4509C14.5394 20.5957 14.6208 20.7922 14.6208 20.9971C14.6208 22.0215 14.2139 23.0039 13.4896 23.7282C12.7652 24.4526 11.7828 24.8595 10.7584 24.8595Z" fill="#232463" />
                                <path d="M19.5568 16.6636C19.2261 16.4432 18.955 16.1446 18.7677 15.7942C18.5804 15.4438 18.4826 15.0525 18.483 14.6551V10.9549C18.4823 9.45251 18.0434 7.98294 17.2202 6.72616C16.3969 5.46937 15.2251 4.47992 13.8481 3.87896V3.23007C13.8481 2.41057 13.5226 1.62463 12.9431 1.04516C12.3636 0.465683 11.5777 0.140137 10.7582 0.140137C9.93869 0.140137 9.15275 0.465683 8.57328 1.04516C7.9938 1.62463 7.66826 2.41057 7.66826 3.23007V3.87896C7.03462 4.15562 6.43991 4.51401 5.89927 4.94499C5.73947 5.07713 5.6387 5.26734 5.61915 5.47378C5.59959 5.68022 5.66284 5.88597 5.79498 6.04578C5.92713 6.20558 6.11734 6.30634 6.32378 6.3259C6.53022 6.34546 6.73597 6.28221 6.89577 6.15006C7.80336 5.4234 8.89753 4.9675 10.0526 4.83475C11.2076 4.70199 12.3767 4.89776 13.4255 5.39956C14.4743 5.90136 15.3602 6.68884 15.9816 7.67154C16.6029 8.65423 16.9344 9.79227 16.9381 10.9549V14.6551C16.9375 15.3074 17.0979 15.9498 17.4052 16.5252C17.7124 17.1006 18.157 17.5912 18.6993 17.9536C18.9233 18.0997 19.0938 18.3145 19.1853 18.5657C19.2769 18.8169 19.2845 19.091 19.207 19.3469C19.1295 19.6028 18.9712 19.8267 18.7557 19.985C18.5402 20.1432 18.2792 20.2274 18.0118 20.2247H3.50457C3.23926 20.2235 2.98128 20.1375 2.76833 19.9792C2.55539 19.821 2.39863 19.5988 2.32097 19.3451C2.24331 19.0914 2.24881 18.8195 2.33667 18.5692C2.42454 18.3188 2.59016 18.1031 2.80933 17.9536C3.35411 17.5931 3.80089 17.103 4.10964 16.5274C4.41838 15.9517 4.57942 15.3084 4.57832 14.6551C4.57832 10.9549 4.40838 9.84253 5.21948 8.20487C5.26412 8.11205 5.29004 8.01134 5.29575 7.90851C5.30147 7.80567 5.28687 7.70271 5.2528 7.60552C5.21873 7.50832 5.16585 7.41879 5.09717 7.34203C5.0285 7.26527 4.94538 7.20279 4.85255 7.15815C4.75973 7.11352 4.65903 7.0876 4.55619 7.08188C4.45336 7.07617 4.3504 7.09076 4.2532 7.12484C4.15601 7.15891 4.06647 7.21179 3.98971 7.28047C3.91296 7.34914 3.85047 7.43226 3.80584 7.52508C2.80161 9.53354 3.03336 10.8931 3.03336 14.6551C3.03434 15.0534 2.93597 15.4457 2.74713 15.7964C2.55829 16.1471 2.28495 16.4451 1.95188 16.6636C1.4553 16.9959 1.07861 17.479 0.877329 18.0417C0.676045 18.6043 0.660807 19.2167 0.833861 19.7886C1.00691 20.3606 1.35911 20.8618 1.83854 21.2185C2.31798 21.5751 2.8993 21.7684 3.49685 21.7697H18.0118C18.6094 21.7684 19.1907 21.5751 19.6701 21.2185C20.1496 20.8618 20.5017 20.3606 20.6748 19.7886C20.8479 19.2167 20.8326 18.6043 20.6313 18.0417C20.43 17.479 20.0534 16.9959 19.5568 16.6636ZM9.21323 3.39229V3.23007C9.23371 2.82032 9.41613 2.43549 9.72036 2.16024C9.871 2.02395 10.047 1.91866 10.2383 1.85039C10.4297 1.78212 10.6326 1.75221 10.8354 1.76235C11.0383 1.7725 11.2372 1.8225 11.4208 1.90952C11.6044 1.99653 11.769 2.11885 11.9053 2.26949C12.0416 2.42012 12.1468 2.59613 12.2151 2.78746C12.2834 2.97878 12.3133 3.18168 12.3032 3.38457C11.2836 3.17446 10.2317 3.17709 9.21323 3.39229Z" fill="#232463" />
                                <circle cx="16.3888" cy="6.70813" r="2.60999" fill="#F66E6A" />
                            </svg>
                        } >
                            <div style={{ maxHeight: "70vh", overflowY: "scroll" }}>
                                {notifications?.map((notification: any) => (
                                    <Dropdown.Item key={notification?._id} style={{ width: "400px", textAlign: "start", display: "flex", justifyContent: 'space-between', alignItems: "center" }}>
                                        <span onClick={redirection}>
                                            {notification?.title}
                                        </span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" className="feather feather-x">
                                            <line x1="18" y1="6" x2="6" y2="18"></line>
                                            <line x1="6" y1="6" x2="18" y2="18"></line>
                                        </svg>
                                    </Dropdown.Item>
                                ))}

                                <hr />
                                <Dropdown.Item style={{ width: "400px", textAlign: "center", display: "flex", justifyContent: 'center', alignItems: "center" }}>
                                    <span >
                                        Mark All As Read
                                    </span>

                                </Dropdown.Item>
                                <hr />
                                <Dropdown.Item style={{ width: "400px", textAlign: "center", display: "flex", justifyContent: 'center', alignItems: "center" }}>
                                    <span onClick={viewAllNotification}>
                                        View All Notifications
                                    </span>

                                </Dropdown.Item>
                            </div>
                        </Dropdown> */}
            <Dropdown
              inline
              label=""
              dismissOnClick={true}
              renderTrigger={() => (
                <div className="flex items-center justify-between w-56 border-2 border-[#F2DAE9] py-1 px-3 rounded-lg">
                  <div className="flex items-center gap-3">
                    {renderProfileImage()}
                    <p className="text-md font-medium ">
                      {customerData?.user?.firstname}
                    </p>
                  </div>
                  <svg
                    width="15"
                    height="10"
                    viewBox="0 0 15 10"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M1.45749 0.573173L0.0102536 2.01595L7.15712 9.14941L14.304 2.01595L12.8567 0.573173L7.15712 6.2594L1.45749 0.573173Z"
                      fill="black"
                    />
                  </svg>
                </div>
              )}
            >
              <Dropdown.Item onClick={handleLogout}>Logout</Dropdown.Item>
            </Dropdown>
          </div>
        </div>
      </div>
      <div className="bg-[white] w-full block xl:hidden" style={{ fontFamily: "poppins, sans-serif" }}>
        <div className="w-[94%] m-auto flex items-center justify-between h-20">
          {/* <div onClick={toggleDrawer} className="cursor-pointer">
            <svg
              width="38"
              height="26"
              viewBox="0 0 38 26"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                x="0.981445"
                y="0.253906"
                width="36.3931"
                height="3.83081"
                rx="1.91541"
                fill="black"
              />
              <rect
                x="0.981445"
                y="11.0847"
                width="36.3931"
                height="3.83081"
                rx="1.91541"
                fill="black"
              />
              <rect
                x="0.981445"
                y="21.9155"
                width="36.3931"
                height="3.83081"
                rx="1.91541"
                fill="black"
              />
            </svg>
          </div> */}
          <div className="flex items-center gap-32">
            <div>
              {/* <a href="/"> */}
              <img
                className="w-36"
                src={mainLogo}
                alt="raffly"
                onClick={handleLogoClick}
                style={{ cursor: "pointer" }}
              />
              {/* </a> */}
            </div>
          </div>
          <div className="flex items-center gap-6">
            {/* <div>
                            <svg width="21" height="26" viewBox="0 0 21 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10.0441 25.6456C9.01968 25.6456 8.03726 25.2387 7.31292 24.5144C6.58857 23.79 6.18164 22.8076 6.18164 21.7832C6.18164 21.5784 6.26303 21.3819 6.4079 21.237C6.55276 21.0921 6.74925 21.0107 6.95412 21.0107C7.159 21.0107 7.35548 21.0921 7.50035 21.237C7.64522 21.3819 7.72661 21.5784 7.72661 21.7832C7.72661 22.3979 7.97077 22.9873 8.40537 23.4219C8.83998 23.8565 9.42943 24.1007 10.0441 24.1007C10.6587 24.1007 11.2481 23.8565 11.6827 23.4219C12.1174 22.9873 12.3615 22.3979 12.3615 21.7832C12.3615 21.5784 12.4429 21.3819 12.5878 21.237C12.7326 21.0921 12.9291 21.0107 13.134 21.0107C13.3389 21.0107 13.5354 21.0921 13.6802 21.237C13.8251 21.3819 13.9065 21.5784 13.9065 21.7832C13.9065 22.8076 13.4995 23.79 12.7752 24.5144C12.0509 25.2387 11.0684 25.6456 10.0441 25.6456Z" fill="#232463" />
                                <path d="M18.8424 17.4492C18.5118 17.2289 18.2407 16.9302 18.0534 16.5798C17.866 16.2294 17.7682 15.8381 17.7687 15.4408V11.7406C17.7679 10.2382 17.329 8.76859 16.5058 7.5118C15.6826 6.25502 14.5107 5.26556 13.1338 4.6646V4.01572C13.1338 3.19621 12.8082 2.41028 12.2288 1.8308C11.6493 1.25133 10.8633 0.925781 10.0438 0.925781C9.22434 0.925781 8.4384 1.25133 7.85892 1.8308C7.27945 2.41028 6.9539 3.19621 6.9539 4.01572V4.6646C6.32027 4.94127 5.72556 5.29965 5.18491 5.73063C5.02511 5.86278 4.92435 6.05299 4.90479 6.25943C4.88523 6.46587 4.94848 6.67162 5.08063 6.83142C5.21277 6.99122 5.40299 7.09199 5.60943 7.11154C5.81586 7.1311 6.02162 7.06785 6.18142 6.93571C7.08901 6.20904 8.18318 5.75315 9.33822 5.62039C10.4933 5.48763 11.6623 5.6834 12.7111 6.1852C13.7599 6.68701 14.6459 7.47449 15.2672 8.45718C15.8885 9.43987 16.2201 10.5779 16.2237 11.7406V15.4408C16.2231 16.093 16.3836 16.7354 16.6908 17.3108C16.9981 17.8862 17.4426 18.3769 17.985 18.7393C18.2089 18.8853 18.3794 19.1001 18.471 19.3513C18.5625 19.6025 18.5701 19.8767 18.4926 20.1326C18.4152 20.3885 18.2568 20.6123 18.0413 20.7706C17.8258 20.9289 17.5648 21.013 17.2975 21.0104H2.79022C2.5249 21.0092 2.26693 20.9231 2.05398 20.7649C1.84103 20.6066 1.68428 20.3844 1.60661 20.1307C1.52895 19.877 1.53445 19.6051 1.62232 19.3548C1.71018 19.1045 1.8758 18.8888 2.09498 18.7393C2.63975 18.3788 3.08654 17.8887 3.39528 17.313C3.70402 16.7373 3.86506 16.094 3.86397 15.4408C3.86397 11.7406 3.69402 10.6282 4.50513 8.99051C4.54976 8.89769 4.57568 8.79699 4.5814 8.69415C4.58711 8.59131 4.57252 8.48836 4.53845 8.39116C4.50437 8.29396 4.45149 8.20443 4.38282 8.12767C4.31414 8.05091 4.23102 7.98843 4.1382 7.9438C4.04538 7.89916 3.94467 7.87325 3.84184 7.86753C3.739 7.86181 3.63604 7.87641 3.53885 7.91048C3.44165 7.94455 3.35212 7.99744 3.27536 8.06611C3.1986 8.13478 3.13612 8.21791 3.09148 8.31073C2.08725 10.3192 2.319 11.6788 2.319 15.4408C2.31999 15.8391 2.22161 16.2313 2.03277 16.582C1.84393 16.9327 1.5706 17.2308 1.23752 17.4492C0.740943 17.7816 0.364258 18.2647 0.162974 18.8273C-0.0383103 19.3899 -0.0535482 20.0023 0.119505 20.5743C0.292559 21.1462 0.644751 21.6475 1.12419 22.0041C1.60362 22.3608 2.18494 22.554 2.78249 22.5553H17.2975C17.895 22.554 18.4763 22.3608 18.9558 22.0041C19.4352 21.6475 19.7874 21.1462 19.9604 20.5743C20.1335 20.0023 20.1183 19.3899 19.917 18.8273C19.7157 18.2647 19.339 17.7816 18.8424 17.4492ZM8.49887 4.17794V4.01572C8.51936 3.60597 8.70178 3.22114 9.006 2.94588C9.15664 2.80959 9.33265 2.70431 9.52397 2.63604C9.7153 2.56777 9.9182 2.53785 10.1211 2.548C10.324 2.55814 10.5229 2.60815 10.7064 2.69516C10.89 2.78218 11.0546 2.90449 11.1909 3.05513C11.3272 3.20577 11.4325 3.38177 11.5008 3.5731C11.569 3.76443 11.5989 3.96733 11.5888 4.17021C10.5693 3.9601 9.51734 3.96273 8.49887 4.17794Z" fill="#232463" />
                                <circle cx="15.6744" cy="7.49377" r="2.60999" fill="#F66E6A" />
                            </svg>
                        </div> */}
            <Dropdown
              inline
              label=""
              dismissOnClick={true}
              renderTrigger={() => (
                <div className="flex items-center gap-2">
                  {/* <svg width="46" height="44" viewBox="0 0 46 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <ellipse cx="23.3011" cy="22.1484" rx="22.3402" ry="21.5" fill="#F2DAE9" />
                                    <g clip-path="url(#clip0_278_427)">
                                        <path d="M23.151 21.986C24.1436 21.986 25.0032 21.6537 25.7055 20.9981C26.4079 20.3426 26.7639 19.5406 26.7639 18.614C26.7639 17.6877 26.4079 16.8856 25.7054 16.2299C25.003 15.5745 24.1435 15.2422 23.151 15.2422C22.1582 15.2422 21.2989 15.5745 20.5966 16.23C19.8942 16.8855 19.5381 17.6876 19.5381 18.614C19.5381 19.5406 19.8942 20.3427 20.5967 20.9982C21.2991 21.6536 22.1586 21.986 23.151 21.986Z" fill="#232463" />
                                        <path d="M29.4725 26.0076C29.4523 25.7348 29.4113 25.4373 29.351 25.123C29.2901 24.8064 29.2117 24.5071 29.1179 24.2336C29.0209 23.9509 28.8891 23.6717 28.7261 23.4041C28.557 23.1264 28.3583 22.8846 28.1354 22.6856C27.9023 22.4774 27.6169 22.31 27.2868 22.188C26.9579 22.0665 26.5934 22.005 26.2035 22.005C26.0504 22.005 25.9023 22.0636 25.6163 22.2374C25.4403 22.3445 25.2344 22.4684 25.0046 22.6055C24.8081 22.7223 24.542 22.8318 24.2132 22.9309C23.8924 23.0278 23.5667 23.0769 23.2452 23.0769C22.9238 23.0769 22.5982 23.0278 22.2771 22.9309C21.9486 22.8319 21.6824 22.7224 21.4862 22.6056C21.2585 22.4698 21.0525 22.3459 20.8739 22.2373C20.5882 22.0635 20.44 22.0049 20.2869 22.0049C19.8969 22.0049 19.5325 22.0665 19.2037 22.1881C18.8739 22.3099 18.5884 22.4773 18.355 22.6857C18.1322 22.8848 17.9334 23.1265 17.7645 23.4041C17.6017 23.6717 17.4698 23.9508 17.3728 24.2337C17.2791 24.5073 17.2007 24.8064 17.1398 25.123C17.0795 25.4368 17.0385 25.7345 17.0183 26.0079C16.9984 26.2758 16.9883 26.5539 16.9883 26.8347C16.9883 27.5655 17.2372 28.1571 17.728 28.5934C18.2128 29.024 18.8542 29.2424 19.6343 29.2424H26.8569C27.6369 29.2424 28.2781 29.0241 28.763 28.5934C29.2539 28.1574 29.5029 27.5657 29.5029 26.8346C29.5027 26.5525 29.4926 26.2742 29.4725 26.0076Z" fill="#232463" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_278_427">
                                            <rect width="15" height="14" fill="white" transform="translate(15.7578 15.2422)" />
                                        </clipPath>
                                    </defs>
                                </svg>
                                <svg width="15" height="10" viewBox="0 0 15 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1.46091 0.675713L0.0136716 2.11849L7.16054 9.25195L14.3074 2.11849L12.8602 0.675712L7.16054 6.36194L1.46091 0.675713Z" fill="black" />
                                </svg> */}
                  {renderProfileImage()}
                </div>
              )}
            >
              <Dropdown.Item onClick={handleLogout}>Logout</Dropdown.Item>
            </Dropdown>
          </div>
        </div>
      </div>
      {/* <main
        className={
          "fixed hiddenSidebar  z-50 bg-gray-900 bg-opacity-50 inset-0 transform ease-in-out " +
          (isDrawerOpen
            ? "transition-opacity opacity-100 duration-500 translate-x-0"
            : "transition-all opacity-0 duration-500 -translate-x-full")
        }
      >
        <section
          className={
            "w-screen hiddenSidebar overflow-hidden max-w-lg left-0 absolute bg-[#20124C] h-full shadow-xl duration-500 ease-in-out transform " +
            (isDrawerOpen ? "translate-x-0" : "-translate-x-full")
          }
          style={{ width: "50%" }} 
        >
          <article className="relative w-full max-w-lg pb-10 flex flex-col space-y-6 overflow-y-scroll h-full">
            <div className="mx-auto pt-4">
              <img
                className="w-36"
                src={whitelogo}
                alt="raffly"
                onClick={handleLogoClick}
                style={{ cursor: "pointer" }}
              />
            </div>
            <div className="text-white flex flex-col items-start w-[80%] m-auto gap-10 font-normal text-md">
              <h4>Charity</h4>
              <h4>Raffly coin</h4>
              <h4>Winners</h4>
              <h4>Local Raffles</h4>
              <h4>Holidays</h4>
              <h4>Hotels</h4>
            </div>
          </article>
        </section>
        <section
          className="w-screen h-full cursor-pointer"
          onClick={() => {
            setIsDrawerOpen(false);
          }}
        ></section>
      </main> */}
      <div className="block lg:hidden mx-auto bg-[#20124C] shadow-md transform ease-in-out">
        <div
          onClick={toggleCollapse}
          className="p-4 w-[90%] m-auto cursor-pointer flex items-center justify-between "
        >
          {selectedMenu}
          <svg
            className={`${isExpanded ? "rotate-180" : "rotate-0"
              } duration-500 `}
            width="15"
            height="9"
            viewBox="0 0 15 9"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M1.94187 0.0380172L0.494629 1.48079L7.6415 8.61426L14.7884 1.48079L13.3411 0.0380167L7.6415 5.72424L1.94187 0.0380172Z"
              fill="white"
            />
          </svg>
        </div>
        <div
          className={`grid grid-cols-1 gap-2   overflow-hidden transition-all  ${isExpanded ? "max-h-full duration-500" : "max-h-0 duration-500"
            }`}
          style={{ maxHeight: isExpanded ? "1000px" : "0" }}
        >
          <div
            onClick={() => handleSelectMenu(1)}
            className="p-4 bg-[#20124C] hover:bg-indigo-900 bg-opacity-10 cursor-pointer text-white flex items-center gap-2 font-medium"
          >
            <svg
              width="16"
              height="15"
              viewBox="0 0 16 15"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M6.62844 7.87252H1.71282C1.68607 7.87252 1.66593 7.86242 1.65343 7.85042C1.64736 7.8446 1.64478 7.83989 1.64397 7.83804C1.64352 7.83704 1.64353 7.83691 1.64355 7.8367C1.64355 7.83666 1.64355 7.83661 1.64355 7.83656V1.5489C1.64355 1.54884 1.64355 1.54879 1.64355 1.54875C1.64353 1.54855 1.64352 1.54842 1.64397 1.54741C1.64478 1.54556 1.64736 1.54086 1.65343 1.53503C1.66593 1.52304 1.68607 1.51294 1.71282 1.51294H6.62844C6.6552 1.51294 6.67533 1.52304 6.68784 1.53503C6.69391 1.54086 6.69648 1.54556 6.6973 1.54741C6.69775 1.54842 6.69774 1.54855 6.69772 1.54875C6.69772 1.54879 6.69771 1.54884 6.69771 1.5489V7.83656C6.69771 7.83672 6.69774 7.83679 6.69771 7.83695C6.69768 7.83712 6.69758 7.83741 6.6973 7.83804C6.69648 7.83989 6.69391 7.8446 6.68784 7.85042C6.67533 7.86242 6.6552 7.87252 6.62844 7.87252ZM6.62844 14.1602H1.71282C1.68607 14.1602 1.66593 14.1501 1.65343 14.1381C1.64736 14.1323 1.64478 14.1276 1.64397 14.1257C1.64352 14.1247 1.64353 14.1246 1.64355 14.1244C1.64355 14.1243 1.64355 14.1243 1.64355 14.1242V10.9804C1.64355 10.9803 1.64355 10.9803 1.64355 10.9802C1.64353 10.98 1.64352 10.9799 1.64397 10.9789C1.64478 10.9771 1.64736 10.9723 1.65343 10.9665C1.66593 10.9545 1.68607 10.9444 1.71282 10.9444H6.62844C6.6552 10.9444 6.67533 10.9545 6.68784 10.9665C6.69391 10.9723 6.69648 10.9771 6.6973 10.9789C6.69784 10.9801 6.69771 10.9801 6.69771 10.9804V14.1242C6.69771 14.1245 6.69784 14.1245 6.6973 14.1257C6.69648 14.1276 6.69391 14.1323 6.68784 14.1381C6.67533 14.1501 6.6552 14.1602 6.62844 14.1602ZM14.8211 14.1602H9.90552C9.87877 14.1602 9.85863 14.1501 9.84613 14.1381C9.84005 14.1323 9.83748 14.1276 9.83666 14.1257C9.83622 14.1247 9.83623 14.1246 9.83624 14.1244C9.83625 14.1243 9.83625 14.1243 9.83625 14.1242V7.83656C9.83625 7.8365 9.83625 7.83646 9.83624 7.83641C9.83623 7.83621 9.83622 7.83608 9.83666 7.83507C9.83748 7.83322 9.84005 7.82852 9.84613 7.82269C9.85863 7.8107 9.87877 7.8006 9.90552 7.8006H14.8211C14.8479 7.8006 14.868 7.8107 14.8805 7.82269C14.8866 7.82852 14.8892 7.83322 14.89 7.83507C14.8904 7.83608 14.8904 7.83621 14.8904 7.83641C14.8904 7.83646 14.8904 7.8365 14.8904 7.83656V14.1242C14.8904 14.1243 14.8904 14.1243 14.8904 14.1244C14.8904 14.1246 14.8904 14.1247 14.89 14.1257C14.8892 14.1276 14.8866 14.1323 14.8805 14.1381C14.868 14.1501 14.8479 14.1602 14.8211 14.1602ZM9.83625 4.69273V1.5489C9.83625 1.54856 9.83613 1.54863 9.83666 1.54741C9.83748 1.54556 9.84005 1.54086 9.84613 1.53503C9.85863 1.52304 9.87877 1.51294 9.90552 1.51294H14.8211C14.8479 1.51294 14.868 1.52304 14.8805 1.53503C14.8866 1.54086 14.8892 1.54556 14.89 1.54741C14.8905 1.54863 14.8904 1.54856 14.8904 1.5489V4.69273C14.8904 4.69306 14.8905 4.693 14.89 4.69421C14.8892 4.69606 14.8866 4.70077 14.8805 4.70659C14.868 4.71859 14.8479 4.72868 14.8211 4.72868H9.90552C9.87877 4.72868 9.85863 4.71859 9.84613 4.70659C9.84005 4.70077 9.83748 4.69606 9.83666 4.69421C9.83622 4.69321 9.83623 4.69308 9.83624 4.69287C9.83625 4.69283 9.83625 4.69278 9.83625 4.69273Z"
                fill="white"
                stroke="white"
                stroke-width="1.5"
              />
            </svg>
            <p>My Raffles</p>
          </div>
          <div
            onClick={() => handleSelectMenu(2)}
            className="p-4 bg-[#20124C] hover:bg-indigo-900 bg-opacity-10 cursor-pointer text-white flex items-center gap-2 font-medium"
          >
            <svg
              width="15"
              height="16"
              viewBox="0 0 15 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_206_3063)">
                <path
                  d="M7.79391 7.34468C8.7204 7.34468 9.52266 6.98866 10.1782 6.28622C10.8337 5.5839 11.166 4.72457 11.166 3.7318C11.166 2.73937 10.8337 1.87992 10.1781 1.17737C9.52245 0.475165 8.72029 0.119141 7.79391 0.119141C6.86732 0.119141 6.06528 0.475165 5.40977 1.17749C4.75427 1.87981 4.42188 2.73926 4.42188 3.7318C4.42188 4.72457 4.75427 5.58402 5.40988 6.28634C6.06549 6.98854 6.86765 7.34468 7.79391 7.34468Z"
                  fill="white"
                />
                <path
                  d="M13.694 11.6534C13.675 11.3611 13.6368 11.0423 13.5805 10.7056C13.5237 10.3664 13.4505 10.0457 13.3629 9.75266C13.2725 9.44974 13.1494 9.15059 12.9973 8.86392C12.8395 8.56637 12.654 8.30728 12.446 8.09408C12.2284 7.87103 11.962 7.6917 11.654 7.5609C11.347 7.43078 11.0068 7.36486 10.6429 7.36486C10.5 7.36486 10.3618 7.42769 10.0948 7.61388C9.93056 7.72867 9.7384 7.86142 9.52393 8.00824C9.34053 8.13344 9.09209 8.25074 8.78522 8.35694C8.48582 8.46074 8.18184 8.51339 7.88181 8.51339C7.58177 8.51339 7.27789 8.46074 6.97818 8.35694C6.67163 8.25086 6.42319 8.13356 6.24001 8.00836C6.02756 7.86291 5.8353 7.73015 5.66856 7.61377C5.40196 7.42757 5.26364 7.36475 5.12073 7.36475C4.75671 7.36475 4.41663 7.43078 4.10976 7.56101C3.80193 7.69159 3.53543 7.87092 3.31764 8.09419C3.10968 8.30751 2.92415 8.56649 2.76649 8.86392C2.6145 9.15059 2.49146 9.44962 2.40088 9.75278C2.3134 10.0459 2.24023 10.3664 2.18341 10.7056C2.12712 11.0418 2.08888 11.3608 2.06998 11.6537C2.05139 11.9408 2.04199 12.2387 2.04199 12.5395C2.04199 13.3225 2.27431 13.9564 2.73242 14.4239C3.18488 14.8852 3.78355 15.1192 4.51158 15.1192H11.2527C11.9807 15.1192 12.5792 14.8853 13.0317 14.4239C13.4899 13.9567 13.7223 13.3227 13.7223 12.5394C13.7222 12.2372 13.7126 11.939 13.694 11.6534Z"
                  fill="white"
                />
              </g>
              <defs>
                <clipPath id="clip0_206_3063">
                  <rect
                    width="14"
                    height="15"
                    fill="white"
                    transform="translate(0.893555 0.119141)"
                  />
                </clipPath>
              </defs>
            </svg>
            <p>My Account</p>
          </div>
          {/* <div
            onClick={() => handleSelectMenu(5)}
            className="p-4 bg-[#20124C] hover:bg-indigo-900 bg-opacity-10 cursor-pointer text-white flex items-center gap-2 font-medium"
          >
            <svg
              width="15"
              height="16"
              viewBox="0 0 15 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_206_3063)">
                <path
                  d="M7.79391 7.34468C8.7204 7.34468 9.52266 6.98866 10.1782 6.28622C10.8337 5.5839 11.166 4.72457 11.166 3.7318C11.166 2.73937 10.8337 1.87992 10.1781 1.17737C9.52245 0.475165 8.72029 0.119141 7.79391 0.119141C6.86732 0.119141 6.06528 0.475165 5.40977 1.17749C4.75427 1.87981 4.42188 2.73926 4.42188 3.7318C4.42188 4.72457 4.75427 5.58402 5.40988 6.28634C6.06549 6.98854 6.86765 7.34468 7.79391 7.34468Z"
                  fill="white"
                />
                <path
                  d="M13.694 11.6534C13.675 11.3611 13.6368 11.0423 13.5805 10.7056C13.5237 10.3664 13.4505 10.0457 13.3629 9.75266C13.2725 9.44974 13.1494 9.15059 12.9973 8.86392C12.8395 8.56637 12.654 8.30728 12.446 8.09408C12.2284 7.87103 11.962 7.6917 11.654 7.5609C11.347 7.43078 11.0068 7.36486 10.6429 7.36486C10.5 7.36486 10.3618 7.42769 10.0948 7.61388C9.93056 7.72867 9.7384 7.86142 9.52393 8.00824C9.34053 8.13344 9.09209 8.25074 8.78522 8.35694C8.48582 8.46074 8.18184 8.51339 7.88181 8.51339C7.58177 8.51339 7.27789 8.46074 6.97818 8.35694C6.67163 8.25086 6.42319 8.13356 6.24001 8.00836C6.02756 7.86291 5.8353 7.73015 5.66856 7.61377C5.40196 7.42757 5.26364 7.36475 5.12073 7.36475C4.75671 7.36475 4.41663 7.43078 4.10976 7.56101C3.80193 7.69159 3.53543 7.87092 3.31764 8.09419C3.10968 8.30751 2.92415 8.56649 2.76649 8.86392C2.6145 9.15059 2.49146 9.44962 2.40088 9.75278C2.3134 10.0459 2.24023 10.3664 2.18341 10.7056C2.12712 11.0418 2.08888 11.3608 2.06998 11.6537C2.05139 11.9408 2.04199 12.2387 2.04199 12.5395C2.04199 13.3225 2.27431 13.9564 2.73242 14.4239C3.18488 14.8852 3.78355 15.1192 4.51158 15.1192H11.2527C11.9807 15.1192 12.5792 14.8853 13.0317 14.4239C13.4899 13.9567 13.7223 13.3227 13.7223 12.5394C13.7222 12.2372 13.7126 11.939 13.694 11.6534Z"
                  fill="white"
                />
              </g>
              <defs>
                <clipPath id="clip0_206_3063">
                  <rect
                    width="14"
                    height="15"
                    fill="white"
                    transform="translate(0.893555 0.119141)"
                  />
                </clipPath>
              </defs>
            </svg>
            <p>Balance</p>
          </div> */}
          <div
            onClick={() => handleSelectMenu(6)}
            className="p-4 bg-[#20124C] hover:bg-indigo-900 bg-opacity-10 cursor-pointer text-white flex items-center gap-2 font-medium"
          >
            <img src={entries} alt="orders" />
            {/* <svg
              width="15"
              height="16"
              viewBox="0 0 15 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_206_3068)">
                <path
                  d="M14.3281 10.9395C14.3281 8.75306 12.9531 6.84281 11.0142 6.26717C10.8923 3.22385 8.54375 0.788086 5.67383 0.788086C2.72615 0.788086 0.328125 3.3574 0.328125 6.51562C0.328125 7.54491 0.583832 8.54707 1.0694 9.42689L0.347778 12.222L2.95665 11.4489C3.71149 11.9272 4.56299 12.1966 5.44183 12.2372C5.97899 14.3148 7.76199 15.7881 9.80273 15.7881C10.6173 15.7881 11.4094 15.5557 12.1054 15.114L14.3084 15.7669L13.699 13.4066C14.1112 12.6609 14.3281 11.8122 14.3281 10.9395ZM3.08611 10.4986L1.52431 10.9615L1.95636 9.28819L1.85788 9.12316C1.39378 8.34519 1.14844 7.44351 1.14844 6.51562C1.14844 3.84206 3.1785 1.66699 5.67383 1.66699C8.16916 1.66699 10.1992 3.84206 10.1992 6.51562C10.1992 9.18919 8.16916 11.3643 5.67383 11.3643C4.8078 11.3643 3.96634 11.1014 3.24013 10.6041L3.08611 10.4986ZM13.1319 14.5065L11.973 14.1629L11.8183 14.2708C11.2183 14.6884 10.5213 14.9092 9.80273 14.9092C8.19885 14.9092 6.78947 13.7981 6.29013 12.2048C8.74615 11.9014 10.7006 9.8074 10.9839 7.17583C12.4708 7.71096 13.5078 9.22101 13.5078 10.9395C13.5078 11.7093 13.3018 12.4561 12.912 13.099L12.8113 13.2648L13.1319 14.5065Z"
                  fill="white"
                />
                <path
                  d="M5.26367 8.72754H6.08398V9.60645H5.26367V8.72754Z"
                  fill="white"
                />
                <path
                  d="M6.49414 5.18262C6.49414 5.43221 6.39929 5.66258 6.22711 5.83138L5.26367 6.77621V7.84863H6.08398V7.16325L6.78093 6.4798C7.11995 6.14735 7.31445 5.6746 7.31445 5.18262C7.31445 4.2133 6.57852 3.4248 5.67383 3.4248C4.76913 3.4248 4.0332 4.2133 4.0332 5.18262H4.85352C4.85352 4.69796 5.22148 4.30371 5.67383 4.30371C6.12617 4.30371 6.49414 4.69796 6.49414 5.18262Z"
                  fill="white"
                />
              </g>
              <defs>
                <clipPath id="clip0_206_3068">
                  <rect
                    width="14"
                    height="15"
                    fill="white"
                    transform="translate(0.328125 0.788086)"
                  />
                </clipPath>
              </defs>
            </svg> */}
            <p>Orders</p>
          </div>
          <div
            onClick={() => handleSelectMenu(3)}
            className="p-4 bg-[#20124C] hover:bg-indigo-900 bg-opacity-10 cursor-pointer text-white flex items-center gap-2 font-medium"
          >
            <svg
              width="17"
              height="15"
              viewBox="0 0 17 15"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M15.5281 0.75H13.1281V0H3.52813V0.75H1.12813C0.648125 0.75 0.328125 1.05 0.328125 1.5V3.3C0.328125 5.025 1.68813 6.45 3.52813 6.675V6.75C3.52813 8.925 5.12813 10.725 7.28813 11.175L6.72813 12.75H4.88812C4.56812 12.75 4.24812 12.975 4.16812 13.275L3.52813 15H13.1281L12.4881 13.275C12.4081 12.975 12.0881 12.75 11.7681 12.75H9.92813L9.36812 11.175C11.5281 10.725 13.1281 8.925 13.1281 6.75V6.675C14.9681 6.45 16.3281 5.025 16.3281 3.3V1.5C16.3281 1.05 16.0081 0.75 15.5281 0.75ZM3.52813 5.175C2.64813 4.95 1.92813 4.2 1.92813 3.3V2.25H3.52813V5.175ZM9.92813 7.5L8.32812 6.675L6.72813 7.5L7.12813 6L5.92812 4.5H7.60813L8.32812 3L9.04813 4.5H10.7281L9.52812 6L9.92813 7.5ZM14.7281 3.3C14.7281 4.2 14.0081 5.025 13.1281 5.175V2.25H14.7281V3.3Z"
                fill="white"
              />
            </svg>
            <p>My Prizes</p>
          </div>
          <div
            onClick={() => handleSelectMenu(7)}
            className="p-4 bg-[#20124C] hover:bg-indigo-900 bg-opacity-10 cursor-pointer text-white flex items-center gap-2 font-medium"
          >
            <svg
              width="15"
              height="16"
              viewBox="0 0 15 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_206_3068)">
                <path
                  d="M14.3281 10.9395C14.3281 8.75306 12.9531 6.84281 11.0142 6.26717C10.8923 3.22385 8.54375 0.788086 5.67383 0.788086C2.72615 0.788086 0.328125 3.3574 0.328125 6.51562C0.328125 7.54491 0.583832 8.54707 1.0694 9.42689L0.347778 12.222L2.95665 11.4489C3.71149 11.9272 4.56299 12.1966 5.44183 12.2372C5.97899 14.3148 7.76199 15.7881 9.80273 15.7881C10.6173 15.7881 11.4094 15.5557 12.1054 15.114L14.3084 15.7669L13.699 13.4066C14.1112 12.6609 14.3281 11.8122 14.3281 10.9395ZM3.08611 10.4986L1.52431 10.9615L1.95636 9.28819L1.85788 9.12316C1.39378 8.34519 1.14844 7.44351 1.14844 6.51562C1.14844 3.84206 3.1785 1.66699 5.67383 1.66699C8.16916 1.66699 10.1992 3.84206 10.1992 6.51562C10.1992 9.18919 8.16916 11.3643 5.67383 11.3643C4.8078 11.3643 3.96634 11.1014 3.24013 10.6041L3.08611 10.4986ZM13.1319 14.5065L11.973 14.1629L11.8183 14.2708C11.2183 14.6884 10.5213 14.9092 9.80273 14.9092C8.19885 14.9092 6.78947 13.7981 6.29013 12.2048C8.74615 11.9014 10.7006 9.8074 10.9839 7.17583C12.4708 7.71096 13.5078 9.22101 13.5078 10.9395C13.5078 11.7093 13.3018 12.4561 12.912 13.099L12.8113 13.2648L13.1319 14.5065Z"
                  fill="white"
                />
                <path
                  d="M5.26367 8.72754H6.08398V9.60645H5.26367V8.72754Z"
                  fill="white"
                />
                <path
                  d="M6.49414 5.18262C6.49414 5.43221 6.39929 5.66258 6.22711 5.83138L5.26367 6.77621V7.84863H6.08398V7.16325L6.78093 6.4798C7.11995 6.14735 7.31445 5.6746 7.31445 5.18262C7.31445 4.2133 6.57852 3.4248 5.67383 3.4248C4.76913 3.4248 4.0332 4.2133 4.0332 5.18262H4.85352C4.85352 4.69796 5.22148 4.30371 5.67383 4.30371C6.12617 4.30371 6.49414 4.69796 6.49414 5.18262Z"
                  fill="white"
                />
              </g>
              <defs>
                <clipPath id="clip0_206_3068">
                  <rect
                    width="14"
                    height="15"
                    fill="white"
                    transform="translate(0.328125 0.788086)"
                  />
                </clipPath>
              </defs>
            </svg>
            <p>Support</p>
          </div>
        </div>
      </div>
    </div>
  );
};

export default UserNavbar;
